<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Si Cesi</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">   
    <link rel="icon" type ="image/png" href="./images/Final_Logo_Sicesi.png">
</head>
<head>
<body>
  <div id="side-menu">
    <!-- back hanya ke halaman utama kalau ada, kalau tidak bisa dihapus -->
      <button onclick="Showmenu()" class="back"><i class="fa-solid fa-arrow-left"></i></button>

      <h2>Pengaturan</h2>

      <a href="profil_saya.html" class="button">
        <i class="fa-solid fa-user"></i>
        <span>Profil Saya</span>
      </a>

      <a href="notifikasi.html" class="button">
        <div class="notif-toggle">
          <span id="notifStatus"><i class="fa-solid fa-bell"></i>Notifikasi ON</span>
          <label class="switch">
            <input type="checkbox" id="notifToggle" checked>
            <span class="slider"></span>
          </label>
        </div>
      </a>
    </div>

    <!-- LOGIN -->
    <div class="container" id="login" style="padding: 0;">
        <div class="header">
            <img id="icon" src="./images/kdw.png" alt="kdw PNG" />
            <img id="logo" src="./images/Final_Logo_Sicesi.png" alt="Final Logo Si cesi PNG" />
        </div>
        <div class="form-container">
            <!-- Role Selector -->
            <div class="role-selector">
                <button class="role-btn active" onclick="selectRole('siswa')">Login Siswa</button>
                <button class="role-btn" onclick="selectRole('guru')">Login Guru</button>
            </div>
            <!-- Siswa Login Form -->
            <div id="siswaLoginForm">
                <div class="input-group">
                    <label for="nisLogin" style="background: transparent; color: black;">Nomor NIS</label>
                    <input type="text" id="nisLogin" placeholder="Masukkan NIS" maxlength="9">
                    <div class="error-message" id="nisLoginError">NIS harus diisi dan berupa tepat 9 angka</div>
                </div>
                <div class="input-group">
                    <label for="nisnLogin" style="background: transparent; color: black;">Nomor NISN</label>
                    <input type="text" id="nisnLogin" placeholder="Masukkan NISN" maxlength="10">
                    <div class="error-message" id="nisnLoginError">NISN harus diisi dan berupa tepat 10 angka</div>
                </div>
                <button class="btn" onclick="handleSiswaLogin()">Login</button>
            </div>
            <!-- Guru Login Form -->
            <div id="guruLoginForm" style="display: none;">
                <div class="input-group">
                    <label for="nikGuru">NIK Guru</label>
                    <input type="text" id="nikGuru" placeholder="Masukkan NIK guru" maxlength="13">
                    <div class="error-message" id="nikGuruError">NIK harus diisi dan berupa tepat 13 angka(harus angka)</div>
                </div>
                <div class="input-group">
                    <label for="kelasGuru">Nama Kelas</label>
                    <select id="kelasGuru">
                        <option value="">Pilih Kelas</option>
                        <option value="10 DKV 1">10 DKV 1</option>
                        <option value="10 DKV 2">10 DKV 2</option>
                        <option value="10 DKV 3">10 DKV 3</option>
                        <option value="10 BR 1">10 BR 1</option>
                        <option value="10 BR 2">10 BR 2</option>
                        <option value="10 BR 3">10 BR 3</option>
                        <option value="10 LP 1">10 LP 1</option>
                        <option value="10 LP 2">10 LP 2</option>
                        <option value="10 LP 3">10 LP 3</option>
                        <option value="10 AKL 1">10 AKL 1</option>
                        <option value="10 AKL 2">10 AKL 2</option>
                        <option value="10 AKL 3">10 AKL 3</option>
                        <option value="10 MPLB 1">10 MPLB 1</option>
                        <option value="10 MPLB 2">10 MPLB 2</option>
                        <option value="10 MPLB 3">10 MPLB 3</option>
                        <option value="10 ULW 1">10 ULW 1</option>
                        <option value="10 ULW 2">10 ULW 2</option>
                        <option value="10 ULW 3">10 ULW 3</option>
                    </select>
                    <div class="error-message" id="kelasGuruError">Kelas harus dipilih</div>
                </div>
                <button class="btn" onclick="handleGuruLogin()">Login</button>
                <div class="switch-form">
                    <p>Contoh: NIK 1234567890000 untuk kelas 10 dkv 1/2/3</p>
                </div>
            </div>
            <!-- Student Data Form -->
            <div id="studentForm" style="display: none;">
                <div class="success-message" id="successMessage">
                    Selamat Login Telah Berhasil ! 
                </div>
               
            </div>
            <!-- Guru Dashboard -->
            <div id="guruDashboard" style="display: none;">
                <div class="guru-info">
                    <h3>Selamat datang, Guru!</h3>
                    <p>Kelas yang dipilih: <strong id="guruKelasDisplay">-</strong></p>
                </div>
                <div class="data-display">
                    <h3>Daftar Siswa di Kelas Ini</h3>
                    <div id="studentList" class="student-list"></div>
                    <p id="noStudents" style="text-align: center; color: #6b7280; display: none;">Belum ada siswa terdaftar di kelas ini.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- BERANDA -->
    <div id="beranda" role="application" style="display: none; position: relative;">
    <header>
      <div class="left">
        <button onclick="Showmenu()" class="hamburger" id="hamburger" aria-label="menu" title="Menu">
          <div class="lines">
            <span></span>
            <span></span>
            <span></span>
          </div>
        </button>
        <div class="brand">Absensi</div>
      </div>
      <div class="logos">
        <img class="logo" src="./images/Final_Logo_Sicesi.png" title="Logo Sekolah"></img>
        <img class="logo" src="./images/kdw.png" title="Logo App"></img>
      </div>
    </header>

    <main>
      <section class="card" aria-labelledby="absen-title">
        <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:6px">
          <div>
            <div id="absen-title" style="font-weight:800;font-size:16px">Box Absen</div>
            <div class="small-gray">Absen datang sebelum <strong>06:30</strong>. Absen pulang setelah <strong>15:00</strong>.</div>
          </div>
          <div class="small-gray">Waktu: <span id="now-time">--:--:--</span></div>
        </div>

        <div class="absen-row">
          <div class="absen-box" id="datang-box">
            <div class="absen-title">
              <div>
                <div style="font-weight:700; width: 50%;">Absen Datang</div>
                <div class="status-pill"><div class="dot" id="dot-datang"></div><div id="label-datang">Belum</div></div>
                <div class="absen-meta">Status kehadiran pagi</div>
              </div>
            </div>
            <div class="absen-meta">Waktu tercatat: <span id="time-datang">-</span></div>
          </div>

          <div class="absen-box" id="pulang-box">
            <div class="absen-title">
              <div>
                <div style="font-weight:700; width: 50%;">Absen Pulang</div>
                <div class="status-pill"><div class="dot" id="dot-pulang"></div><div id="label-pulang">Belum</div></div>
                <div class="absen-meta">Status pulang</div>
              </div>
            </div>
            <div class="absen-meta">Waktu tercatat: <span id="time-pulang">-</span></div>
          </div>
        </div>

        <button class="big-btn" id="absen-btn">Absen Sekarang</button>
        <div class="info-msg" id="info-msg">Tekan tombol untuk melakukan absen. Pastikan lokasi aktif.</div>
      </section>

      <section class="map-box card">
        <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:8px">
          <div style="font-weight:700">Lokasi (real-time)</div>
          <button id="loc-toggle" style="background:transparent;border:0;color:var(--a);font-weight:700;cursor:pointer">Aktifkan</button>
        </div>
        <div class="coords">
          <div>Lat: <span id="lat">-</span></div>
          <div>Lon: <span id="lon">-</span></div>
        </div>
        <iframe class="map" id="map-frame" src="about:blank" title="peta lokasi"></iframe>
      </section>
    </main>

    <footer>
      <div class="menu beranda onpage" onclick="beranda()">Beranda</div>
      <div class="menu izin" onclick="izin()">Izin</div>
      <div class="menu statistik" onclick="statistik()">Statistik</div>
    </footer>
  </div>

  <!-- AJUKAN IZIN -->

  <div id="izin" class="container" style="display: none;">
    <header>
      <div class="left">
        <button onclick="Showmenu()" class="hamburger" id="hamburger" aria-label="menu" title="Menu">
          <div class="lines">
            <span></span>
            <span></span>
            <span></span>
          </div>
        </button>
        <div class="brand">Absensi</div>
      </div>
      <div class="logos">
        <img class="logo" src="./images/Final_Logo_Sicesi.png" title="Logo Sekolah"></img>
        <img class="logo" src="./images/kdw.png" title="Logo App"></img>
      </div>
    </header>
      <div class="box-title">Pengajuan Izin</div>

    <!-- Peringatan input kosong -->
    <div class="warning" id="formWarning"></div>

    <form id="izinForm">
      <label>Pilih Jenis Izin:</label>
      <select id="jenis">
        <option value="" disabled selected>-- Pilih Jenis --</option>
        <option value="Izin">Izin</option>
        <option value="Sakit">Sakit</option>
      </select>

      <label>Tanggal:</label>
      <input type="date" id="tanggal">

      <label>Keterangan:</label>
      <textarea id="keterangan" placeholder="Masukkan keterangan anda..."></textarea>

      <button type="submit">Ajukan Izin</button>
    </form>

    <footer>
      <div class="menu beranda" onclick="beranda()">Beranda</div>
      <div class="menu izin onpage" onclick="izin()">Izin</div>
      <div class="menu statistik" onclick="statistik()">Statistik</div>
    </footer>
  </div>


  <!-- STATISTIK -->
  <div id="statistik" class="container" style="display: none;">
    <header>
      <div class="left">
        <button onclick="Showmenu()" class="hamburger" id="hamburger" aria-label="menu" title="Menu">
          <div class="lines">
            <span></span>
            <span></span>
            <span></span>
          </div>
        </button>
        <div class="brand">Absensi</div>
      </div>
      <div class="logos">
        <img class="logo" src="./images/Final_Logo_Sicesi.png" title="Logo Sekolah"></img>
        <img class="logo" src="./images/kdw.png" title="Logo App"></img>
      </div>
    </header>

    <div class="box-title">Pengajuan Izin</div>

    <table id="izinTable">
      <thead>
        <tr>
          <th>Tanggal</th>
          <th>Jenis</th>
          <th>Lihat</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>

    <p class="empty-warning" id="warningMsg">Belum ada data pengajuan izin.</p>

    <div class="keterangan" id="boxKeterangan">
      <h3>Detail Pengajuan</h3>
      <p class="detail-item"><span class="detail-label">Tanggal:</span> <span id="detailTanggal"></span></p>
      <p class="detail-item"><span class="detail-label">Jenis:</span> <span id="detailJenis"></span></p>
      <p class="detail-item"><span class="detail-label">Keterangan:</span> <span id="detailKeterangan"></span></p>
    </div>

    <footer>
      <div class="menu beranda" onclick="beranda()">Beranda</div>
      <div class="menu izin" onclick="izin()">Izin</div>
      <div class="menu statistik onpage" onclick="statistik()">Statistik</div>
    </footer>
  </div>

  
    <script src="./script.js"></script>
</body>
</html> 